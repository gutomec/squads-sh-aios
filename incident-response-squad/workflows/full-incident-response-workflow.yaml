workflow_name: full_incident_response
description: "Pipeline completo de resposta a incidentes â€” do alerta ao post-mortem blameless, integrando anÃ¡lise de logs, correlaÃ§Ã£o de causa raiz, execuÃ§Ã£o de runbooks, comunicaÃ§Ã£o de status e geraÃ§Ã£o de post-mortem"

agent_sequence:
  - log-analyzer
  - root-cause-correlator
  - runbook-executor
  - status-page-updater
  - postmortem-writer

key_commands:
  - "*respond-incident"
  - "*incident-full"

trigger_threshold: 1
typical_duration: "30-90 minutes"

success_indicators:
  - "Logs analisados â€” anomalias identificadas e priorizadas"
  - "Causa raiz identificada com confidence score >= 50%"
  - "Blast radius mapeado"
  - "Runbook executado â€” remediaÃ§Ã£o validada"
  - "Status page atualizado â€” stakeholders notificados dentro do SLA"
  - "Post-mortem blameless gerado com action items"

transitions:
  logs_analyzed:
    trigger: "AnÃ¡lise de logs completa â€” anomalias identificadas e log-analysis-report.md gerado"
    confidence: 0.90
    greeting_message: "ğŸ“‹ Logs analisados. Iniciando correlaÃ§Ã£o de causa raiz."
    next_steps:
      - command: "*correlate-signals"
        args_template: "--loganalysis=log-analysis-report.md"
        description: "Correlacionar sinais de mÃºltiplas ferramentas para identificar causa raiz"
        priority: 1

  root_cause_identified:
    trigger: "Causa raiz identificada â€” root-cause-report.md gerado com confidence score"
    confidence: 0.90
    greeting_message: "ğŸ” Causa raiz identificada. Executando runbook de remediaÃ§Ã£o."
    next_steps:
      - command: "*execute-runbook"
        args_template: "--runbook={suggested_runbook} --target={affected_service}"
        description: "Executar runbook de remediaÃ§Ã£o baseado na causa raiz"
        priority: 1

  remediation_complete:
    trigger: "Runbook executado â€” remediaÃ§Ã£o validada com mÃ©tricas de saÃºde"
    confidence: 0.95
    greeting_message: "âš¡ RemediaÃ§Ã£o executada. Atualizando status page."
    next_steps:
      - command: "*update-status"
        args_template: "--severity={severity} --status=monitoring --message={resolution_message}"
        description: "Atualizar status page com resultado da remediaÃ§Ã£o"
        priority: 1

  status_communicated:
    trigger: "Status page atualizado â€” stakeholders notificados"
    confidence: 0.95
    greeting_message: "ğŸ“¢ Status comunicado. Gerando post-mortem blameless."
    next_steps:
      - command: "*write-postmortem"
        args_template: "--incident={incident_id}"
        description: "Gerar post-mortem blameless completo do incidente"
        priority: 1

  postmortem_complete:
    trigger: "Post-mortem gerado â€” postmortem.md com action items e liÃ§Ãµes aprendidas"
    confidence: 0.95
    greeting_message: "ğŸ“ Resposta ao incidente completa. Post-mortem disponÃ­vel para review."
    next_steps:
      - command: "*update-status"
        args_template: "--severity={severity} --status=resolved --message=Incidente resolvido"
        description: "Marcar incidente como resolvido no status page"
        priority: 1
