workflow_name: full_clinical_documentation
description: "Pipeline completo de documenta√ß√£o cl√≠nica ‚Äî do √°udio da consulta ao prontu√°rio completo com nota SOAP, c√≥digos ICD-10/CPT e revis√£o de qualidade"

agent_sequence:
  - ambient-listener
  - clinical-note-drafter
  - medical-coder
  - quality-reviewer

key_commands:
  - "*document-visit"
  - "*full-documentation"

trigger_threshold: 1
typical_duration: "5-15 minutes"

success_indicators:
  - "Transcri√ß√£o gerada com speakers identificados"
  - "Nota cl√≠nica SOAP completa e estruturada"
  - "C√≥digos ICD-10-CM atribu√≠dos com confidence >= 80%"
  - "C√≥digos CPT atribu√≠dos e n√≠vel E/M definido"
  - "Quality review score >= 90%"
  - "Compliance HIPAA verificado sem viola√ß√µes"
  - "Pacote de documenta√ß√£o completo gerado"

transitions:
  transcription_complete:
    trigger: "Transcri√ß√£o finalizada ‚Äî speakers identificados e termos m√©dicos mapeados"
    confidence: 0.90
    greeting_message: "üéôÔ∏è Transcri√ß√£o completa. Iniciando gera√ß√£o da nota cl√≠nica."
    next_steps:
      - command: "*draft-note"
        args_template: "--format=soap"
        description: "Gerar nota cl√≠nica em formato SOAP a partir da transcri√ß√£o"
        priority: 1

  note_drafted:
    trigger: "Nota cl√≠nica SOAP gerada com todas as se√ß√µes preenchidas"
    confidence: 0.90
    greeting_message: "üìã Nota SOAP gerada. Iniciando codifica√ß√£o m√©dica."
    next_steps:
      - command: "*assign-codes"
        args_template: "--note={clinical_note_path}"
        description: "Atribuir c√≥digos ICD-10 e CPT baseados na nota cl√≠nica"
        priority: 1

  codes_assigned:
    trigger: "C√≥digos ICD-10 e CPT atribu√≠dos com confidence scores"
    confidence: 0.90
    greeting_message: "üè• Codifica√ß√£o completa. Iniciando revis√£o de qualidade."
    next_steps:
      - command: "*review-note"
        args_template: "--note={clinical_note_path} --codes={coding_report_path}"
        description: "Revisar qualidade, completude e compliance da documenta√ß√£o"
        priority: 1

  review_passed:
    trigger: "Quality review score >= 90% ‚Äî documenta√ß√£o aprovada"
    confidence: 0.95
    greeting_message: "‚úÖ Documenta√ß√£o aprovada! Pacote completo gerado."
    next_steps:
      - command: "*full-documentation"
        description: "Gerar pacote de documenta√ß√£o final para o prontu√°rio"
        priority: 1

  review_failed:
    trigger: "Quality review score < 90% ‚Äî corre√ß√µes necess√°rias"
    confidence: 0.85
    greeting_message: "‚ö†Ô∏è Documenta√ß√£o precisa de corre√ß√µes. Retornando ao drafter."
    next_steps:
      - command: "*draft-note"
        args_template: "--format=soap --fixes={issues_list}"
        description: "Corrigir nota cl√≠nica baseado nos issues identificados"
        priority: 1
